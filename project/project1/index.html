<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Tyler Roquebert" />
    
    <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
    <title>CompBioProject-1-TJR2489</title>
    <meta name="generator" content="Hugo 0.83.1" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/css/main.css" />
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,200bold,400old" />
    
    <!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
			<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->

    
  </head>

  <body>
    <div id="wrap">
      
      <nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="/"><i class="fa fa-home"></i></a>
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div class="navbar-collapse collapse" id="navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
        <li><a href="/post/">BLOG</a></li>
        
        <li><a href="/projects/">PROJECTS</a></li>
        
        <li><a href="/resume/">RESUME</a></li>
        
      
      </ul>
    </div>
  </div>
</nav>

      <div class="container">
        <div class="blog-post">
          <h3>
            <strong><a href="/project/project1/">CompBioProject-1-TJR2489</a></strong>
          </h3>
        </div>
 
<div class="blog-title">
          <h4>
         January 1, 0001 
            &nbsp;&nbsp;
            
          </h4>
        </div>

        <div class="panel panel-default">
          <div class="panel-body">
            <div class="blogpost">
              
<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/plotly-binding/plotly.js"></script>
<script src="/rmarkdown-libs/typedarray/typedarray.min.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<link href="/rmarkdown-libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/rmarkdown-libs/plotly-main/plotly-latest.min.js"></script>


<pre class="r"><code>#formatting setup
knitr::opts_chunk$set(echo = TRUE, eval = TRUE, fig.align = &quot;center&quot;, warning = F, message = F,
tidy=TRUE, tidy.opts=list(width.cutoff=60), R.options=list(max.print=100))</code></pre>
<div id="spotify-data-project" class="section level1">
<h1>Spotify Data Project!</h1>
<div id="setting-up-library" class="section level2">
<h2>Setting up Library</h2>
<pre class="r"><code>library(jsonlite)
library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.3     ✓ purrr   0.3.4
## ✓ tibble  3.0.5     ✓ dplyr   1.0.5
## ✓ tidyr   1.1.2     ✓ stringr 1.4.0
## ✓ readr   1.4.0     ✓ forcats 0.5.0</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter()  masks stats::filter()
## x purrr::flatten() masks jsonlite::flatten()
## x dplyr::lag()     masks stats::lag()</code></pre>
<pre class="r"><code>library(knitr)
library(lubridate)</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<pre class="r"><code>library(kableExtra)</code></pre>
<pre><code>## 
## Attaching package: &#39;kableExtra&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     group_rows</code></pre>
</div>
<div id="installing-spotifyr-package-and-acquiring-spotify-web-api-access" class="section level2">
<h2>Installing ‘spotifyr’ package and acquiring Spotify Web API Access</h2>
<pre class="r"><code>#downloading the package &#39;spotifyr&#39; from GitHub
# devtools::install_github(&#39;charlie86/spotifyr&#39;)
library(spotifyr)

#acquiring Spotify API access
Sys.setenv(SPOTIFY_CLIENT_ID = &quot;903fbc26394c4d3a8f4952eaf3681fd3&quot;)
Sys.setenv(SPOTIFY_CLIENT_SECRET = &quot;12d6d93453074c8e8caecd14ef9f68b4&quot;)
access_token &lt;- get_spotify_access_token()</code></pre>
</div>
<div id="pulling-in-my-top-songs-of-2020-playlist-the-track-audio-features-and-joining-together" class="section level2">
<h2>Pulling in My Top Songs of 2020 Playlist, the Track Audio Features, and Joining Together</h2>
<pre class="r"><code># my_plists &lt;- get_my_playlists() #successfully acquires my 20 most recently added/liked/created playlists
#turns playlist into a single row in df; obtained the playlist id from it
# top_2020_playlist &lt;- my_plists %&gt;% filter(name %in% c(&quot;Your Top Songs 2020&quot;))
#successfully returns all 100 tracks in the my Top 2020 playlist, using the Spotify playlist id - doesn&#39;t include track_audio_features
top_2020_tracks &lt;- get_playlist_tracks(playlist_id = &#39;37i9dQZF1EM9Jj6kqpNa6l&#39;)
#getting audio features for all 100 unique songs in the Top 2020 playlist using lapply
audio_feat &lt;- lapply(list(top_2020_tracks$track.id), get_track_audio_features)
#binding track audio feature data into a clean df
audio_feat &lt;- do.call(&#39;rbind&#39;, audio_feat)
#joining Track Audio Feature data with Track listing df; keeping the original track data intact and adding in 17 variables (40 to 57)
top_2020_track_features &lt;- top_2020_tracks %&gt;% left_join(audio_feat, by = c(&quot;track.id&quot; = &quot;id&quot;))</code></pre>
</div>
<div id="tidying-the-top-2020-tracks-to-include-relevant-variables" class="section level2">
<h2>Tidying the Top 2020 Tracks to Include Relevant Variables</h2>
<pre class="r"><code>#grabbing data on tracks; many columns in original df were extraneous or duplicates to some extent (user url vs playlist url)
toptrackstidy &lt;- top_2020_track_features %&gt;%
  select(14,16,18,19,22,24,25,26,29,30,31,32,34,37,38,39,41,42,43,44,45,46,47,48,49,50,51,56,57)
#rearranging columns to pull track name to front, followed by if it&#39;s from album or single, the album&#39;s name, and then everything else
toptrackstidy &lt;- toptrackstidy %&gt;% select(track.name, track.album.album_type, track.album.name, everything())
#renaming everything to my liking
toptrackstidy &lt;- toptrackstidy %&gt;% rename(album_type=track.album.album_type, album_name=track.album.name, explicit=track.explicit, track_id=track.id, track_popularity=track.popularity, track_number=track.track_number,track_uri=track.uri, album_artists=track.album.artists, album_id=track.album.id, album_images=track.album.images, album_release_date=track.album.release_date, tracks_in_album=track.album.total_tracks, album_external_url=track.album.external_urls.spotify, track_external_ids=track.external_ids.isrc, track_external_url=track.external_urls.spotify)
#getting the explicit designation from logical, to numeric, and finally to categorical to group by later
toptrackstidy &lt;- toptrackstidy %&gt;% mutate(explicit = as.numeric(explicit))
#using case_when function to force explicit designation to a categorical variable (one of the better grouping categories ive got)
toptrackstidy &lt;-toptrackstidy %&gt;% mutate(explicit = case_when(explicit &gt; 0 ~ &quot;yes&quot;, explicit &lt; 1 ~ &quot;no&quot;))
#a sneak peak!
glimpse(toptrackstidy)</code></pre>
<pre><code>## Rows: 100
## Columns: 29
## $ track.name         &lt;chr&gt; &quot;Lost In Yesterday&quot;, &quot;Borderline&quot;, &quot;Your Love (Déj…
## $ album_type         &lt;chr&gt; &quot;album&quot;, &quot;album&quot;, &quot;single&quot;, &quot;single&quot;, &quot;single&quot;, &quot;a…
## $ album_name         &lt;chr&gt; &quot;The Slow Rush&quot;, &quot;The Slow Rush&quot;, &quot;Your Love (Déjà…
## $ explicit           &lt;chr&gt; &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;yes…
## $ track_id           &lt;chr&gt; &quot;5JWPUEov2wlX7c0jhYZpeB&quot;, &quot;5hM5arv9KDbCHS0k9uqwjr&quot;…
## $ track_popularity   &lt;int&gt; 71, 78, 63, 65, 77, 66, 75, 1, 71, 64, 70, 57, 66,…
## $ track_number       &lt;int&gt; 8, 3, 1, 1, 1, 1, 3, 1, 1, 4, 3, 1, 1, 10, 5, 12, …
## $ track_uri          &lt;chr&gt; &quot;spotify:track:5JWPUEov2wlX7c0jhYZpeB&quot;, &quot;spotify:t…
## $ album_artists      &lt;list&gt; [&lt;data.frame[1 x 6]&gt;, &lt;data.frame[1 x 6]&gt;, &lt;data.…
## $ album_id           &lt;chr&gt; &quot;31qVWUdRrlb8thMvts0yYL&quot;, &quot;31qVWUdRrlb8thMvts0yYL&quot;…
## $ album_images       &lt;list&gt; [&lt;data.frame[3 x 3]&gt;, &lt;data.frame[3 x 3]&gt;, &lt;data.…
## $ album_release_date &lt;chr&gt; &quot;2020-02-14&quot;, &quot;2020-02-14&quot;, &quot;2020-02-19&quot;, &quot;2019-11…
## $ tracks_in_album    &lt;int&gt; 12, 12, 1, 1, 1, 12, 12, 1, 1, 12, 14, 1, 1, 12, 1…
## $ album_external_url &lt;chr&gt; &quot;https://open.spotify.com/album/31qVWUdRrlb8thMvts…
## $ track_external_ids &lt;chr&gt; &quot;AUUM71900932&quot;, &quot;AUUM71900956&quot;, &quot;GBUM71905661&quot;, &quot;G…
## $ track_external_url &lt;chr&gt; &quot;https://open.spotify.com/track/5JWPUEov2wlX7c0jhY…
## $ danceability       &lt;dbl&gt; 0.569, 0.621, 0.854, 0.708, 0.739, 0.643, 0.742, 0…
## $ energy             &lt;dbl&gt; 0.840, 0.873, 0.671, 0.496, 0.522, 0.573, 0.553, 0…
## $ key                &lt;int&gt; 1, 5, 7, 8, 7, 4, 8, 9, 1, 7, 7, 8, 6, 2, 2, 2, 1,…
## $ loudness           &lt;dbl&gt; -4.123, -3.067, -7.158, -8.175, -12.304, -7.034, -…
## $ mode               &lt;int&gt; 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1,…
## $ speechiness        &lt;dbl&gt; 0.1180, 0.0369, 0.0543, 0.0496, 0.1510, 0.0709, 0.…
## $ acousticness       &lt;dbl&gt; 0.02950, 0.04060, 0.01900, 0.08160, 0.82100, 0.410…
## $ instrumentalness   &lt;dbl&gt; 1.18e-04, 9.10e-06, 3.83e-01, 1.09e-04, 1.24e-03, …
## $ liveness           &lt;dbl&gt; 0.0995, 0.0824, 0.1050, 0.1020, 0.2330, 0.0695, 0.…
## $ valence            &lt;dbl&gt; 0.7490, 0.8730, 0.6310, 0.4120, 0.6190, 0.4700, 0.…
## $ tempo              &lt;dbl&gt; 183.059, 97.960, 107.994, 128.914, 138.263, 165.19…
## $ duration_ms        &lt;int&gt; 249587, 237800, 234372, 217693, 146390, 259747, 20…
## $ time_signature     &lt;int&gt; 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 4, 4, 4, 4, 4,…</code></pre>
</div>
<div id="creating-summary-statistics" class="section level2">
<h2>Creating Summary Statistics</h2>
<pre class="r"><code>#using mutate() to add new variables for track length in seconds and then minutes. originally in milliseconds, precise but hard to read
toptrackstidy &lt;- toptrackstidy %&gt;% 
  mutate(duration_sec = duration_ms/1000) %&gt;%
  mutate(duration_min=duration_sec/60)
#playing with select() and filter() based on danceability and speechiness scores --&gt; only three songs met this requirement in my top 100!
toptrackstidy %&gt;% select(track.name, track_popularity, danceability, speechiness) %&gt;% 
  filter(danceability &gt;= 0.5, speechiness &gt;= 0.5) %&gt;% kable() %&gt;% kable_styling()</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
track.name
</th>
<th style="text-align:right;">
track_popularity
</th>
<th style="text-align:right;">
danceability
</th>
<th style="text-align:right;">
speechiness
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
RNP (feat. Anderson .Paak)
</td>
<td style="text-align:right;">
71
</td>
<td style="text-align:right;">
0.611
</td>
<td style="text-align:right;">
0.856
</td>
</tr>
<tr>
<td style="text-align:left;">
All Good (feat. Will Wildfire)
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0.804
</td>
<td style="text-align:right;">
0.511
</td>
</tr>
<tr>
<td style="text-align:left;">
Baguetti (with JID &amp; Kenny Beats)
</td>
<td style="text-align:right;">
63
</td>
<td style="text-align:right;">
0.788
</td>
<td style="text-align:right;">
0.535
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>#playing with select() and arrange() based on danceability values
toptrackstidy %&gt;% select(track.name, track_popularity, danceability) %&gt;% 
  arrange(desc(danceability)) %&gt;% head(10) %&gt;% kable() %&gt;% kable_styling()</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
track.name
</th>
<th style="text-align:right;">
track_popularity
</th>
<th style="text-align:right;">
danceability
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Lockdown
</td>
<td style="text-align:right;">
65
</td>
<td style="text-align:right;">
0.928
</td>
</tr>
<tr>
<td style="text-align:left;">
U Say (feat. Tyler, The Creator &amp; Jay Prince)
</td>
<td style="text-align:right;">
64
</td>
<td style="text-align:right;">
0.926
</td>
</tr>
<tr>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
67
</td>
<td style="text-align:right;">
0.905
</td>
</tr>
<tr>
<td style="text-align:left;">
Stunnin’ (feat. Harm Franklin)
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
0.885
</td>
</tr>
<tr>
<td style="text-align:left;">
Phone Numbers
</td>
<td style="text-align:right;">
73
</td>
<td style="text-align:right;">
0.884
</td>
</tr>
<tr>
<td style="text-align:left;">
18K (feat. Juicy J)
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
0.874
</td>
</tr>
<tr>
<td style="text-align:left;">
Compensating (feat. Young Thug)
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0.867
</td>
</tr>
<tr>
<td style="text-align:left;">
Tieduprightnow
</td>
<td style="text-align:right;">
69
</td>
<td style="text-align:right;">
0.863
</td>
</tr>
<tr>
<td style="text-align:left;">
Your Love (Déjà Vu)
</td>
<td style="text-align:right;">
63
</td>
<td style="text-align:right;">
0.854
</td>
</tr>
<tr>
<td style="text-align:left;">
Tangerine
</td>
<td style="text-align:right;">
69
</td>
<td style="text-align:right;">
0.845
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>#using group_by() to group by the number of tracks in an album (if album or single), then adding columns for mean/sd of danceability
toptrackstidy %&gt;% group_by(explicit) %&gt;% 
  summarize_at(17:20, list(mean=mean, sd=sd, median=median, ndistinct=n_distinct)) %&gt;% 
  kable() %&gt;% kable_styling() </code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
explicit
</th>
<th style="text-align:right;">
energy_mean
</th>
<th style="text-align:right;">
key_mean
</th>
<th style="text-align:right;">
loudness_mean
</th>
<th style="text-align:right;">
mode_mean
</th>
<th style="text-align:right;">
energy_sd
</th>
<th style="text-align:right;">
key_sd
</th>
<th style="text-align:right;">
loudness_sd
</th>
<th style="text-align:right;">
mode_sd
</th>
<th style="text-align:right;">
energy_median
</th>
<th style="text-align:right;">
key_median
</th>
<th style="text-align:right;">
loudness_median
</th>
<th style="text-align:right;">
mode_median
</th>
<th style="text-align:right;">
energy_ndistinct
</th>
<th style="text-align:right;">
key_ndistinct
</th>
<th style="text-align:right;">
loudness_ndistinct
</th>
<th style="text-align:right;">
mode_ndistinct
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
no
</td>
<td style="text-align:right;">
0.5898889
</td>
<td style="text-align:right;">
4.851852
</td>
<td style="text-align:right;">
-7.385037
</td>
<td style="text-align:right;">
0.4444444
</td>
<td style="text-align:right;">
0.1609098
</td>
<td style="text-align:right;">
3.382122
</td>
<td style="text-align:right;">
2.674042
</td>
<td style="text-align:right;">
0.5063697
</td>
<td style="text-align:right;">
0.583
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
-6.614
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
yes
</td>
<td style="text-align:right;">
0.5970822
</td>
<td style="text-align:right;">
5.301370
</td>
<td style="text-align:right;">
-7.572356
</td>
<td style="text-align:right;">
0.4794521
</td>
<td style="text-align:right;">
0.1200415
</td>
<td style="text-align:right;">
3.627384
</td>
<td style="text-align:right;">
1.897961
</td>
<td style="text-align:right;">
0.5030349
</td>
<td style="text-align:right;">
0.576
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
-7.634
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
71
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>#making summary statistics of mean, sd, min, max for 12 of my numeric variables
sum_stats_top_tracks &lt;- toptrackstidy %&gt;% summarize_at(17:27, 
                                                       list(min=min, max=max, mean=mean, sd=sd,
                                                            median=median, ndistinct=n_distinct))
#need to reshape the df i created above with summary statistics to make it presentable and usable later
sum_stats_top_tracks %&gt;% pivot_longer(contains(&quot;_&quot;)) %&gt;% 
  separate(name, into = c(&quot;audio_features&quot;, &quot;var&quot;), sep = &quot;\\_&quot;) %&gt;% 
  pivot_wider(names_from = &quot;var&quot;, values_from = &quot;value&quot;) %&gt;% 
  kable() %&gt;% kable_styling()</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
audio_features
</th>
<th style="text-align:right;">
min
</th>
<th style="text-align:right;">
max
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
median
</th>
<th style="text-align:right;">
ndistinct
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
danceability
</td>
<td style="text-align:right;">
0.25300
</td>
<td style="text-align:right;">
0.928
</td>
<td style="text-align:right;">
0.6972300
</td>
<td style="text-align:right;">
0.1440696
</td>
<td style="text-align:right;">
0.7285000
</td>
<td style="text-align:right;">
91
</td>
</tr>
<tr>
<td style="text-align:left;">
energy
</td>
<td style="text-align:right;">
0.32000
</td>
<td style="text-align:right;">
0.898
</td>
<td style="text-align:right;">
0.5951400
</td>
<td style="text-align:right;">
0.1314921
</td>
<td style="text-align:right;">
0.5805000
</td>
<td style="text-align:right;">
89
</td>
</tr>
<tr>
<td style="text-align:left;">
key
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
11.000
</td>
<td style="text-align:right;">
5.1800000
</td>
<td style="text-align:right;">
3.5515824
</td>
<td style="text-align:right;">
5.0000000
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
loudness
</td>
<td style="text-align:right;">
-13.42400
</td>
<td style="text-align:right;">
-3.067
</td>
<td style="text-align:right;">
-7.5217800
</td>
<td style="text-align:right;">
2.1224320
</td>
<td style="text-align:right;">
-7.3585000
</td>
<td style="text-align:right;">
98
</td>
</tr>
<tr>
<td style="text-align:left;">
mode
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.4700000
</td>
<td style="text-align:right;">
0.5016136
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
speechiness
</td>
<td style="text-align:right;">
0.02970
</td>
<td style="text-align:right;">
0.856
</td>
<td style="text-align:right;">
0.1714540
</td>
<td style="text-align:right;">
0.1460517
</td>
<td style="text-align:right;">
0.1280000
</td>
<td style="text-align:right;">
95
</td>
</tr>
<tr>
<td style="text-align:left;">
acousticness
</td>
<td style="text-align:right;">
0.00307
</td>
<td style="text-align:right;">
0.883
</td>
<td style="text-align:right;">
0.2605296
</td>
<td style="text-align:right;">
0.2198052
</td>
<td style="text-align:right;">
0.2045000
</td>
<td style="text-align:right;">
98
</td>
</tr>
<tr>
<td style="text-align:left;">
instrumentalness
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
0.529
</td>
<td style="text-align:right;">
0.0252866
</td>
<td style="text-align:right;">
0.0936770
</td>
<td style="text-align:right;">
0.0000155
</td>
<td style="text-align:right;">
62
</td>
</tr>
<tr>
<td style="text-align:left;">
liveness
</td>
<td style="text-align:right;">
0.05780
</td>
<td style="text-align:right;">
0.767
</td>
<td style="text-align:right;">
0.2012050
</td>
<td style="text-align:right;">
0.1444794
</td>
<td style="text-align:right;">
0.1400000
</td>
<td style="text-align:right;">
87
</td>
</tr>
<tr>
<td style="text-align:left;">
valence
</td>
<td style="text-align:right;">
0.04700
</td>
<td style="text-align:right;">
0.937
</td>
<td style="text-align:right;">
0.5162710
</td>
<td style="text-align:right;">
0.2231594
</td>
<td style="text-align:right;">
0.5110000
</td>
<td style="text-align:right;">
97
</td>
</tr>
<tr>
<td style="text-align:left;">
tempo
</td>
<td style="text-align:right;">
70.08000
</td>
<td style="text-align:right;">
196.043
</td>
<td style="text-align:right;">
119.2150400
</td>
<td style="text-align:right;">
31.9475472
</td>
<td style="text-align:right;">
114.4770000
</td>
<td style="text-align:right;">
100
</td>
</tr>
</tbody>
</table>
<p>The table above describes the minimum, maximum, mean, standard deviation, median, and number of distinct values for each of the 11 audio features. There were 100 observations within the dataset, representing my Top 100 songs of 2020. The standard deviation across all audio features is small with the exception of tempo. The tempo of a song in beats per minute influences the energy and danceability as well, so it’s surprising to not see greater variation in those categories as well. One feature in this table that sticks out would be the audio feature mode - which indicates whether the track is recorded in a Major or Minor scale. This was represented as binary values (0 or 1), so there are only 2 distinct values and a large difference between the mean and median in this category. In conclusion, the average values of each individual category don’t reflect too much about my individual listening history. A better way to understand my listening is through visualizations which are to follow!</p>
<pre class="r"><code>#creating summary stats based off of a grouping variable (is a song from an album or single) 
grouped_sum_stats &lt;- toptrackstidy %&gt;% group_by(album_type) %&gt;% summarize_at(17:26, list(min=min, max=max, mean=mean, 
                                                                                         sd=sd,median=median, 
                                                                                         ndistinct=n_distinct))
#this table shows summary statistics for 10 audio features based off of whether the song was from a single or an album
grouped_sum_stats %&gt;% pivot_longer(cols = -1) %&gt;% 
  separate(name, into = c(&quot;audio_features&quot;, &quot;var&quot;), sep = &quot;\\_&quot;) %&gt;% 
  pivot_wider(names_from = &quot;var&quot;, values_from = &quot;value&quot;) %&gt;% 
  kable() %&gt;% kable_styling()</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
album_type
</th>
<th style="text-align:left;">
audio_features
</th>
<th style="text-align:right;">
min
</th>
<th style="text-align:right;">
max
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
median
</th>
<th style="text-align:right;">
ndistinct
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
album
</td>
<td style="text-align:left;">
energy
</td>
<td style="text-align:right;">
0.32000
</td>
<td style="text-align:right;">
0.898
</td>
<td style="text-align:right;">
0.6154915
</td>
<td style="text-align:right;">
0.1380074
</td>
<td style="text-align:right;">
0.6130000
</td>
<td style="text-align:right;">
55
</td>
</tr>
<tr>
<td style="text-align:left;">
album
</td>
<td style="text-align:left;">
key
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
11.000
</td>
<td style="text-align:right;">
5.0169492
</td>
<td style="text-align:right;">
3.7622972
</td>
<td style="text-align:right;">
5.0000000
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
album
</td>
<td style="text-align:left;">
loudness
</td>
<td style="text-align:right;">
-13.42400
</td>
<td style="text-align:right;">
-3.067
</td>
<td style="text-align:right;">
-7.1902881
</td>
<td style="text-align:right;">
2.1081595
</td>
<td style="text-align:right;">
-7.3390000
</td>
<td style="text-align:right;">
59
</td>
</tr>
<tr>
<td style="text-align:left;">
album
</td>
<td style="text-align:left;">
mode
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.5593220
</td>
<td style="text-align:right;">
0.5007300
</td>
<td style="text-align:right;">
1.0000000
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
album
</td>
<td style="text-align:left;">
speechiness
</td>
<td style="text-align:right;">
0.02970
</td>
<td style="text-align:right;">
0.856
</td>
<td style="text-align:right;">
0.1720797
</td>
<td style="text-align:right;">
0.1498757
</td>
<td style="text-align:right;">
0.1290000
</td>
<td style="text-align:right;">
57
</td>
</tr>
<tr>
<td style="text-align:left;">
album
</td>
<td style="text-align:left;">
acousticness
</td>
<td style="text-align:right;">
0.00307
</td>
<td style="text-align:right;">
0.853
</td>
<td style="text-align:right;">
0.2162536
</td>
<td style="text-align:right;">
0.2115596
</td>
<td style="text-align:right;">
0.1340000
</td>
<td style="text-align:right;">
59
</td>
</tr>
<tr>
<td style="text-align:left;">
album
</td>
<td style="text-align:left;">
instrumentalness
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
0.424
</td>
<td style="text-align:right;">
0.0256962
</td>
<td style="text-align:right;">
0.0892144
</td>
<td style="text-align:right;">
0.0000205
</td>
<td style="text-align:right;">
39
</td>
</tr>
<tr>
<td style="text-align:left;">
album
</td>
<td style="text-align:left;">
liveness
</td>
<td style="text-align:right;">
0.05780
</td>
<td style="text-align:right;">
0.653
</td>
<td style="text-align:right;">
0.2040237
</td>
<td style="text-align:right;">
0.1507677
</td>
<td style="text-align:right;">
0.1330000
</td>
<td style="text-align:right;">
54
</td>
</tr>
<tr>
<td style="text-align:left;">
album
</td>
<td style="text-align:left;">
valence
</td>
<td style="text-align:right;">
0.04700
</td>
<td style="text-align:right;">
0.931
</td>
<td style="text-align:right;">
0.4927898
</td>
<td style="text-align:right;">
0.2219880
</td>
<td style="text-align:right;">
0.5130000
</td>
<td style="text-align:right;">
58
</td>
</tr>
<tr>
<td style="text-align:left;">
album
</td>
<td style="text-align:left;">
tempo
</td>
<td style="text-align:right;">
77.58200
</td>
<td style="text-align:right;">
196.043
</td>
<td style="text-align:right;">
123.7763559
</td>
<td style="text-align:right;">
34.4224395
</td>
<td style="text-align:right;">
115.9460000
</td>
<td style="text-align:right;">
59
</td>
</tr>
<tr>
<td style="text-align:left;">
single
</td>
<td style="text-align:left;">
energy
</td>
<td style="text-align:right;">
0.35200
</td>
<td style="text-align:right;">
0.879
</td>
<td style="text-align:right;">
0.5658537
</td>
<td style="text-align:right;">
0.1169888
</td>
<td style="text-align:right;">
0.5370000
</td>
<td style="text-align:right;">
41
</td>
</tr>
<tr>
<td style="text-align:left;">
single
</td>
<td style="text-align:left;">
key
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
11.000
</td>
<td style="text-align:right;">
5.4146341
</td>
<td style="text-align:right;">
3.2555768
</td>
<td style="text-align:right;">
6.0000000
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
single
</td>
<td style="text-align:left;">
loudness
</td>
<td style="text-align:right;">
-12.30400
</td>
<td style="text-align:right;">
-4.045
</td>
<td style="text-align:right;">
-7.9988049
</td>
<td style="text-align:right;">
2.0759488
</td>
<td style="text-align:right;">
-7.8840000
</td>
<td style="text-align:right;">
41
</td>
</tr>
<tr>
<td style="text-align:left;">
single
</td>
<td style="text-align:left;">
mode
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.3414634
</td>
<td style="text-align:right;">
0.4800915
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
single
</td>
<td style="text-align:left;">
speechiness
</td>
<td style="text-align:right;">
0.03170
</td>
<td style="text-align:right;">
0.535
</td>
<td style="text-align:right;">
0.1705537
</td>
<td style="text-align:right;">
0.1422044
</td>
<td style="text-align:right;">
0.1270000
</td>
<td style="text-align:right;">
41
</td>
</tr>
<tr>
<td style="text-align:left;">
single
</td>
<td style="text-align:left;">
acousticness
</td>
<td style="text-align:right;">
0.01900
</td>
<td style="text-align:right;">
0.883
</td>
<td style="text-align:right;">
0.3242439
</td>
<td style="text-align:right;">
0.2182364
</td>
<td style="text-align:right;">
0.2920000
</td>
<td style="text-align:right;">
39
</td>
</tr>
<tr>
<td style="text-align:left;">
single
</td>
<td style="text-align:left;">
instrumentalness
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
0.529
</td>
<td style="text-align:right;">
0.0246973
</td>
<td style="text-align:right;">
0.1008840
</td>
<td style="text-align:right;">
0.0000058
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
single
</td>
<td style="text-align:left;">
liveness
</td>
<td style="text-align:right;">
0.06680
</td>
<td style="text-align:right;">
0.767
</td>
<td style="text-align:right;">
0.1971488
</td>
<td style="text-align:right;">
0.1366583
</td>
<td style="text-align:right;">
0.1480000
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:left;">
single
</td>
<td style="text-align:left;">
valence
</td>
<td style="text-align:right;">
0.06050
</td>
<td style="text-align:right;">
0.937
</td>
<td style="text-align:right;">
0.5500610
</td>
<td style="text-align:right;">
0.2231987
</td>
<td style="text-align:right;">
0.5080000
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:left;">
single
</td>
<td style="text-align:left;">
tempo
</td>
<td style="text-align:right;">
70.08000
</td>
<td style="text-align:right;">
172.783
</td>
<td style="text-align:right;">
112.6511951
</td>
<td style="text-align:right;">
27.0765134
</td>
<td style="text-align:right;">
102.0250000
</td>
<td style="text-align:right;">
41
</td>
</tr>
</tbody>
</table>
<p>This table shows the same summary statistics as the one above, but the tracks have been categorized by the nature of their release: whether they were released as a single or part of an album.</p>
<pre class="r"><code>#making a correlation matrix of numeric variables (aka the audio_features)
cormatrix &lt;- toptrackstidy %&gt;% select(17:27) %&gt;% cor(use = &quot;pair&quot;)
cormatrixtidy &lt;- cormatrix %&gt;% 
  as.data.frame() %&gt;% 
  rownames_to_column(&quot;audio_feat1&quot;) %&gt;% 
  pivot_longer(-1, names_to = &quot;audio_feat2&quot;, values_to = &quot;correlation&quot;)
#shows that the correlation matrix was successfully pivoted to a cleaner df; this will be used to plot below. 
cormatrixtidy %&gt;% head(5) %&gt;% kable() %&gt;% kable_styling()</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
audio_feat1
</th>
<th style="text-align:left;">
audio_feat2
</th>
<th style="text-align:right;">
correlation
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
danceability
</td>
<td style="text-align:left;">
danceability
</td>
<td style="text-align:right;">
1.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
danceability
</td>
<td style="text-align:left;">
energy
</td>
<td style="text-align:right;">
-0.0870061
</td>
</tr>
<tr>
<td style="text-align:left;">
danceability
</td>
<td style="text-align:left;">
key
</td>
<td style="text-align:right;">
0.1572348
</td>
</tr>
<tr>
<td style="text-align:left;">
danceability
</td>
<td style="text-align:left;">
loudness
</td>
<td style="text-align:right;">
0.0812827
</td>
</tr>
<tr>
<td style="text-align:left;">
danceability
</td>
<td style="text-align:left;">
mode
</td>
<td style="text-align:right;">
-0.1266077
</td>
</tr>
</tbody>
</table>
</div>
<div id="time-to-plot" class="section level2">
<h2>Time to Plot!</h2>
<pre class="r"><code>cormatrixtidy %&gt;% ggplot(aes(audio_feat1, audio_feat2, fill=correlation)) + geom_tile() +
scale_fill_gradient2(low=&quot;orange&quot;,mid=&quot;white&quot;,high=&quot;purple&quot;)+ 
geom_text(aes(label=round(correlation,3)),color = &quot;navy&quot;, size = 3)+
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  ggtitle(&quot;Correlation Heat-Map for Numeric Audio Features&quot;)</code></pre>
<p><img src="/project/project1_files/figure-html/Correlation%20Heatmap-1.png" width="672" />
<em>There were 11 relevant audio features that I was able to pull from Spotify’s API. When viewing the correlation heat-map of the 11 numeric audio features, the strongest observed correlation (besides to itself) is between loudness and energy. Considering loudness is measured in decibels and energy is a “perceptual measure of intensity and activity” - where heavy metal would be most energetic - this is not a surprising correlation. Another moderate correlation that I find interesting is that between Valence and Energy. Valence is described as the overall positivity of the track, and energy is a different-but-similar measurement, so it’s reassuring seeing they have a moderate correlation in my top 100 tracks of 2020.</em></p>
<p>I was able to find a really useful website that has a complete description of all the variables Spotify keeps on tracks. I’d like to link it here so that references in my explanations have supporting evidence, and because I figured you’d like to see what this person was able to do with their dataset. Link: <a href="https://rpubs.com/PeterDola/SpotifyTracks#" class="uri">https://rpubs.com/PeterDola/SpotifyTracks#</a>:~:text=Some%20of%20the%20variables%20are,confidence%20the%20track%20is%20acoustic.</p>
<pre class="r"><code>toptrackstidy %&gt;% ggplot(aes(x=danceability, y=speechiness)) + 
  geom_point(aes(color=explicit, size = instrumentalness)) + 
  theme_light()+
  scale_x_continuous(breaks = c(0, 0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0))+
  scale_y_continuous(breaks = c(0, 0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0))+
  ggtitle(&quot;Relationship Between Speechiness, Danceability, and Instrumentalness of Track&quot;)</code></pre>
<p><img src="/project/project1_files/figure-html/Scatterplot%20mapping%20danceability,%20speechinness,%20instrumentalness,%20and%20explicit%20designation-1.png" width="672" />
<em>The scatterplot above shows the relationship between speechiness scores and danceability values. The color of the dots represents if the song was explicit or not, and the dot size correlates to the instrumentalness score assigned to the song. The most apparent trend is that the highest scoring tracks in instrumentalness tended to score lowest on speechiness - not surprising considering more spoken word (like rap) tends to have less accompanying instruments. Furthermore, my top 100 songs of 2020 that were not explicit scored lower on speechiness than about half of the explicit songs. My favorite genre of music is hip-hop/rap, and songs in that genre tend to be explicit AND full of spoken word (high speechiness values), so the rough trend observed above verifies this assumption!</em></p>
<pre class="r"><code>#changing the song&#39;s key designation from numeric to categorical variables for easier reading; done using integer-pitch notation
toptrackstidykey &lt;- toptrackstidy %&gt;% 
  mutate(key = case_when(key &gt; 10 ~ &quot;B&quot;, key&lt;=10 &amp; 9&lt;key ~ &quot;B.flat&quot;,
                                         key&lt;=9 &amp; 8&lt;key ~ &quot;A&quot;,
                                         key&lt;=8 &amp; 7&lt;key ~ &quot;G.sharp&quot;,
                                         key&lt;=7 &amp; 6&lt;key ~ &quot;G&quot;,
                                         key&lt;=6 &amp; 5&lt;key ~ &quot;F.sharp&quot;,
                                         key&lt;=5 &amp; 4&lt;key ~ &quot;F&quot;,
                                         key&lt;=4 &amp; 3&lt;key ~ &quot;E&quot;,
                                         key&lt;=3 &amp; 2&lt;key ~ &quot;D.sharp&quot;,
                                         key&lt;=2 &amp; 1&lt;key ~ &quot;D&quot;,
                                         key&lt;=1 &amp; 0&lt;key ~ &quot;C.sharp&quot;,
                                         key&lt;= 0 ~ &quot;C&quot;))
#plotting the average popularity of a track based on what key the track(s) were in; also split into categories based on whether the song was released as a single or part of an album
ggplot(toptrackstidykey, aes(x=key, y=track_popularity))+ 
  geom_bar(stat = &quot;summary&quot;, aes(fill=album_type), position = &quot;dodge&quot;) + 
  theme(legend.position = &quot;top&quot;)+
  scale_y_continuous(name = &quot;Average Track Popularity&quot;)+
  scale_x_discrete(name = &quot;Track&#39;s Key&quot;) +
  ggtitle(&quot;Average Track Popularity Based on Song&#39;s Key and Type of Track Release&quot;)</code></pre>
<pre><code>## No summary function supplied, defaulting to `mean_se()`</code></pre>
<p><img src="/project/project1_files/figure-html/Last%20Plot-1.png" width="672" />
<em>The bar chart above shows the average popularity of tracks based on what key the song(s) was in. The data is broken down further based on whether the song was released as a single or part of an album. Track popularity is rated on a 0-100 scale, with 100 being the most popular. Songs in the key F-sharp from an album have the highest average song popularity; meanwhile, songs released as a single experienced the greatest average popularity in the key D-natural. Tracks released as part of an album had higher average popularity scores in all keys except for B-flat and D-natural. Finally, it looks like singles in the key D-sharp were not high on people’s listening list in 2020, as it received the lowest average track popularity (from the 2 songs out of my top 100 that were in this key</em></p>
</div>
<div id="pam-clustering-on-selected-numeric-variables" class="section level2">
<h2>PAM Clustering on Selected Numeric Variables</h2>
<pre class="r"><code>library(cluster)
#pulling the numeric variables of interest from original dataset; selecting the 14 most representative of audio features to include in PAM
data_to_clust &lt;- toptrackstidy %&gt;% 
  select(6,17,18,19,20,21,22,23,24,25,26,27,28,29)

#using loop to find optimal number of clusters - using 14 numeric variables to predict! the loop performs a PAM clustering analysis for n-number of clusters. PAM clustering 
sil_width&lt;-vector()
for (i in 2:12) {
  pam_fit &lt;- pam(data_to_clust, k = i)
  sil_width[i] &lt;- pam_fit$silinfo$avg.width
}
#the plot below indicates that the optimal number of clusters is 5! 
ggplot()+geom_line(aes(x=1:12,y=sil_width))+
  scale_x_continuous(name=&quot;k (number of clusters)&quot;,breaks=1:12) +
  scale_y_continuous(name=&quot;Average Silhouette Width&quot;)+
  ggtitle(&quot;Average Silhouette Width for Each No. of Clusters&quot;)</code></pre>
<pre><code>## Warning: Removed 1 row(s) containing missing values (geom_path).</code></pre>
<p><img src="/project/project1_files/figure-html/Subsetting%20and%20finding%20optimal%20number%20of%20clusters-1.png" width="672" /></p>
<pre class="r"><code>#clustering with k=5, based off of previous plot indicating the average silhouette width is MAXIMIZED when there are 5 clusters
tracks_pam &lt;- data_to_clust %&gt;% pam(k=5)
tracks_pam</code></pre>
<pre><code>## Medoids:
##      ID track_popularity danceability energy key loudness mode speechiness
## [1,] 92               47        0.675  0.410   0  -10.699    0      0.0444
## [2,] 52               67        0.905  0.562   8   -7.884    1      0.0662
## [3,] 13               66        0.647  0.537   6  -12.006    0      0.2100
## [4,] 54               73        0.559  0.578   8   -9.540    1      0.1510
## [5,] 46               80        0.558  0.559   6   -9.222    1      0.0959
##      acousticness instrumentalness liveness valence   tempo duration_ms
## [1,]        0.298         6.79e-04    0.133   0.301  79.998      248920
## [2,]        0.453         2.85e-04    0.130   0.507 139.997      206500
## [3,]        0.430         2.58e-04    0.119   0.846  84.460      142500
## [4,]        0.790         5.22e-04    0.324   0.239  79.938      320720
## [5,]        0.371         7.49e-06    0.109   0.620  78.558      180387
##      time_signature
## [1,]              4
## [2,]              4
## [3,]              4
## [4,]              4
## [5,]              4
## Clustering vector:
##   [1] 1 1 1 2 3 1 2 4 3 4 1 2 3 1 1 4 4 1 5 2 4 3 2 5 5 2 4 5 1 1 5 4 1 5 2 2 2
##  [38] 3 4 1 5 3 3 1 4 5 2 2 4 2 1 2 4 4 1 1 1 2 2 5 2 5 5 5 3 3 2 3 3 4 4 2 4 2
##  [75] 2 5 5 3 3 3 1 1 5 1 2 5 1 2 5 1 1 1 2 2 2 5 5 3 3 3
## Objective function:
##    build     swap 
## 12073.62  9674.72 
## 
## Available components:
##  [1] &quot;medoids&quot;    &quot;id.med&quot;     &quot;clustering&quot; &quot;objective&quot;  &quot;isolation&quot; 
##  [6] &quot;clusinfo&quot;   &quot;silinfo&quot;    &quot;diss&quot;       &quot;call&quot;       &quot;data&quot;</code></pre>
<pre class="r"><code>#our average silhoutte width with a cluster number of 5 is 0.5989. When interpreting cluster strength, the average silhouette width indicates that a reasonable structure has been found.
tracks_pam$silinfo$avg.width</code></pre>
<pre><code>## [1] 0.5989423</code></pre>
<p>Average silhouette width is a measurement which describes the quality of the clustering after performing PAM clustering analysis. Silhouette width can be thought of as the inverse of the within-cluster variation and linearly related to between-cluster variation; when the variation among points within clusters is minimized - then the silhouette width is maximized. Conversely, when the variation between clusters is maximized, average silhouette width increases. Thus, the greater the average silhouette width, the stronger the cluster structure pattern is since it can be thought of a measurement for how cohesive and separated clusters are simultaneously. Plotting average silhouette width for a range of k clusters reveals how many clusters may be optimal for the data. The average silhouette width is maximized when k=5 for the top tracks data; at k=5 there a reasonable cluster structure has been found with average silhouette width equal to 0.5989.</p>
<pre class="r"><code>plot(tracks_pam, which=2)</code></pre>
<p><img src="/project/project1_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>The plot above reveals the distribution of our cluster data, and confirms that the average silhouette width is approximately 0.60.</p>
<pre class="r"><code>#using mutate(), added clustering results (1-5) to the dataset containing all audio feature numeric variables; &amp; saved it all as clustdat
clustdat &lt;- data_to_clust %&gt;%
  mutate(cluster=as.factor(tracks_pam$clustering))
#provides the mean value of each audio feature based on the cluster grouping
clustdat%&gt;%group_by(cluster)%&gt;%
  summarize_if(is.numeric,mean,na.rm=T) %&gt;% 
  kable() %&gt;% kable_styling()</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
cluster
</th>
<th style="text-align:right;">
track_popularity
</th>
<th style="text-align:right;">
danceability
</th>
<th style="text-align:right;">
energy
</th>
<th style="text-align:right;">
key
</th>
<th style="text-align:right;">
loudness
</th>
<th style="text-align:right;">
mode
</th>
<th style="text-align:right;">
speechiness
</th>
<th style="text-align:right;">
acousticness
</th>
<th style="text-align:right;">
instrumentalness
</th>
<th style="text-align:right;">
liveness
</th>
<th style="text-align:right;">
valence
</th>
<th style="text-align:right;">
tempo
</th>
<th style="text-align:right;">
duration_ms
</th>
<th style="text-align:right;">
time_signature
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:right;">
63.37500
</td>
<td style="text-align:right;">
0.7059167
</td>
<td style="text-align:right;">
0.6171250
</td>
<td style="text-align:right;">
3.625000
</td>
<td style="text-align:right;">
-7.261875
</td>
<td style="text-align:right;">
0.5416667
</td>
<td style="text-align:right;">
0.1795542
</td>
<td style="text-align:right;">
0.1468654
</td>
<td style="text-align:right;">
0.0319019
</td>
<td style="text-align:right;">
0.1713292
</td>
<td style="text-align:right;">
0.5418333
</td>
<td style="text-align:right;">
117.2822
</td>
<td style="text-align:right;">
250957.4
</td>
<td style="text-align:right;">
3.958333
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:right;">
60.16000
</td>
<td style="text-align:right;">
0.7027200
</td>
<td style="text-align:right;">
0.5822800
</td>
<td style="text-align:right;">
5.480000
</td>
<td style="text-align:right;">
-7.368680
</td>
<td style="text-align:right;">
0.5600000
</td>
<td style="text-align:right;">
0.1345640
</td>
<td style="text-align:right;">
0.2757400
</td>
<td style="text-align:right;">
0.0057206
</td>
<td style="text-align:right;">
0.1990920
</td>
<td style="text-align:right;">
0.4611600
</td>
<td style="text-align:right;">
123.3302
</td>
<td style="text-align:right;">
207394.4
</td>
<td style="text-align:right;">
4.040000
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:right;">
57.11765
</td>
<td style="text-align:right;">
0.7301176
</td>
<td style="text-align:right;">
0.5648824
</td>
<td style="text-align:right;">
5.882353
</td>
<td style="text-align:right;">
-8.328588
</td>
<td style="text-align:right;">
0.3529412
</td>
<td style="text-align:right;">
0.1876706
</td>
<td style="text-align:right;">
0.3698824
</td>
<td style="text-align:right;">
0.0489082
</td>
<td style="text-align:right;">
0.1827353
</td>
<td style="text-align:right;">
0.6554118
</td>
<td style="text-align:right;">
115.7859
</td>
<td style="text-align:right;">
140767.4
</td>
<td style="text-align:right;">
4.058823
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:right;">
64.66667
</td>
<td style="text-align:right;">
0.6194000
</td>
<td style="text-align:right;">
0.5595333
</td>
<td style="text-align:right;">
5.133333
</td>
<td style="text-align:right;">
-8.009000
</td>
<td style="text-align:right;">
0.6666667
</td>
<td style="text-align:right;">
0.1875467
</td>
<td style="text-align:right;">
0.2687993
</td>
<td style="text-align:right;">
0.0096744
</td>
<td style="text-align:right;">
0.1944267
</td>
<td style="text-align:right;">
0.3013067
</td>
<td style="text-align:right;">
125.5096
</td>
<td style="text-align:right;">
319931.7
</td>
<td style="text-align:right;">
4.000000
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:right;">
58.26316
</td>
<td style="text-align:right;">
0.7110526
</td>
<td style="text-align:right;">
0.6394737
</td>
<td style="text-align:right;">
6.157895
</td>
<td style="text-align:right;">
-6.945000
</td>
<td style="text-align:right;">
0.2105263
</td>
<td style="text-align:right;">
0.1825474
</td>
<td style="text-align:right;">
0.2797211
</td>
<td style="text-align:right;">
0.0338657
</td>
<td style="text-align:right;">
0.2636000
</td>
<td style="text-align:right;">
0.6017105
</td>
<td style="text-align:right;">
114.3407
</td>
<td style="text-align:right;">
180555.6
</td>
<td style="text-align:right;">
3.842105
</td>
</tr>
</tbody>
</table>
<p>The table above shows the mean value for each audio feature based on/or within each cluster. The audio features with the greatest difference between clusters appear to be track popularity, key, and danceability scores (at cluster 4).</p>
<pre class="r"><code>#below are exact points in each cluster which represent the cluster&#39;s medoid. the medoid is the most representative point (which comes from the dataset and is not generated) of the cluster it is in.
clustdat %&gt;% slice(tracks_pam$id.med) %&gt;% 
  select(cluster, everything()) %&gt;% 
  kable() %&gt;% kable_styling()</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
cluster
</th>
<th style="text-align:right;">
track_popularity
</th>
<th style="text-align:right;">
danceability
</th>
<th style="text-align:right;">
energy
</th>
<th style="text-align:right;">
key
</th>
<th style="text-align:right;">
loudness
</th>
<th style="text-align:right;">
mode
</th>
<th style="text-align:right;">
speechiness
</th>
<th style="text-align:right;">
acousticness
</th>
<th style="text-align:right;">
instrumentalness
</th>
<th style="text-align:right;">
liveness
</th>
<th style="text-align:right;">
valence
</th>
<th style="text-align:right;">
tempo
</th>
<th style="text-align:right;">
duration_ms
</th>
<th style="text-align:right;">
time_signature
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
0.675
</td>
<td style="text-align:right;">
0.410
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
-10.699
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0444
</td>
<td style="text-align:right;">
0.298
</td>
<td style="text-align:right;">
6.79e-04
</td>
<td style="text-align:right;">
0.133
</td>
<td style="text-align:right;">
0.301
</td>
<td style="text-align:right;">
79.998
</td>
<td style="text-align:right;">
248920
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:right;">
67
</td>
<td style="text-align:right;">
0.905
</td>
<td style="text-align:right;">
0.562
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
-7.884
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0662
</td>
<td style="text-align:right;">
0.453
</td>
<td style="text-align:right;">
2.85e-04
</td>
<td style="text-align:right;">
0.130
</td>
<td style="text-align:right;">
0.507
</td>
<td style="text-align:right;">
139.997
</td>
<td style="text-align:right;">
206500
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:right;">
66
</td>
<td style="text-align:right;">
0.647
</td>
<td style="text-align:right;">
0.537
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
-12.006
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.2100
</td>
<td style="text-align:right;">
0.430
</td>
<td style="text-align:right;">
2.58e-04
</td>
<td style="text-align:right;">
0.119
</td>
<td style="text-align:right;">
0.846
</td>
<td style="text-align:right;">
84.460
</td>
<td style="text-align:right;">
142500
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:right;">
73
</td>
<td style="text-align:right;">
0.559
</td>
<td style="text-align:right;">
0.578
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
-9.540
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.1510
</td>
<td style="text-align:right;">
0.790
</td>
<td style="text-align:right;">
5.22e-04
</td>
<td style="text-align:right;">
0.324
</td>
<td style="text-align:right;">
0.239
</td>
<td style="text-align:right;">
79.938
</td>
<td style="text-align:right;">
320720
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
0.558
</td>
<td style="text-align:right;">
0.559
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
-9.222
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0959
</td>
<td style="text-align:right;">
0.371
</td>
<td style="text-align:right;">
7.50e-06
</td>
<td style="text-align:right;">
0.109
</td>
<td style="text-align:right;">
0.620
</td>
<td style="text-align:right;">
78.558
</td>
<td style="text-align:right;">
180387
</td>
<td style="text-align:right;">
4
</td>
</tr>
</tbody>
</table>
<p>The table above gives the observation within each cluster that represents that cluster’s specific medoid. The medoid of a cluster can be described as the most representative point within that cluster. In PAM clustering, the medoid represents an actual observation in the data; meanwhile, k-means clustering generates a centroid to represent the cluster but it does not represent an actual point in the data. Interestingly, 4 of the distinct cluster medoids had the same two keys (F-sharp = 6, G-sharp = 8). There were only 10 distinct keys among my top 100 songs, so this may have lowered the ability to differentiate between clusters based on key.</p>
<pre class="r"><code>#scatterplot showing relationship between song tempo (bpm) and a song&#39;s valence (positivity of track), based on cluster designation
#scatterplot below isn&#39;t a great representation because it captures only 2 dimensions of our clusters - and there were 14 numeric variables that were used in the PAM clustering (across 5 clusters)
clustdat %&gt;% ggplot(aes(tempo, valence, color=cluster))+geom_point() + 
  theme_dark(base_size = 13)+
  scale_y_continuous(name=&quot;Track&#39;s Valence (positivity score)&quot;)+
  scale_x_continuous(name=&quot;Track&#39;s Tempo (beats/min)&quot;)+
  ggtitle(&quot;Relationship Between Valence and Tempo By Cluster&quot;)</code></pre>
<p><img src="/project/project1_files/figure-html/cool%20plots!-1.png" width="672" />
The scatterplot above depicts the relationship between valence and tempo between the five different clusters. This scatterplot only includes two numeric variables to visualize the clustering relationship; considering there were 14 numeric audio features that were included in the PAM clustering, visualizing based off of two is not very indicative of the overall pattern. Thus, the clusters don’t appear to follow any sort of pattern in this plot.</p>
<pre class="r"><code>library(plotly)</code></pre>
<pre><code>## 
## Attaching package: &#39;plotly&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     last_plot</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     filter</code></pre>
<pre><code>## The following object is masked from &#39;package:graphics&#39;:
## 
##     layout</code></pre>
<pre class="r"><code>clustdat %&gt;% plot_ly(x= ~tempo, y = ~valence, z = ~danceability, color = ~cluster,
                     type = &quot;scatter3d&quot;, mode = &quot;markers&quot;, symbol = ~mode, symbols = c(&#39;circle&#39;, &#39;square&#39;), opacity = 0.75) %&gt;% layout(
    title = &quot;3D Cluster Visualization: Relationship Between Danceability, Valence, and Tempo&quot;, 
    scene = list(
      xaxis = list(title = &quot;Tempo (beats/min)&quot;),
      yaxis = list(title = &quot;Valence (positivity)&quot;),
      zaxis = list(title = &quot;Danceability Rating&quot;))) %&gt;% 
  layout(legend=list(title=list(text=&#39;&lt;b&gt; Clusters &lt;/b&gt;&#39;)))</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"visdat":{"18578daed686":["function () ","plotlyVisDat"]},"cur_data":"18578daed686","attrs":{"18578daed686":{"x":{},"y":{},"z":{},"mode":"markers","opacity":0.75,"color":{},"symbol":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"symbols":["circle","square"],"type":"scatter3d"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"3D Cluster Visualization: Relationship Between Danceability, Valence, and Tempo","scene":{"xaxis":{"title":"Tempo (beats/min)"},"yaxis":{"title":"Valence (positivity)"},"zaxis":{"title":"Danceability Rating"}},"legend":{"title":{"text":"<b> Clusters <\/b>"}},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[183.059,97.96,107.994,165.192,178.929,115.946,77.582,118.018,104.991,80.87,139.785,109.076,115.04,176.089,92.871,79.999,142.037,88.616,171.943,96.62,102.025,100.098,90.034,79.998],"y":[0.749,0.873,0.631,0.47,0.237,0.336,0.39,0.661,0.562,0.531,0.671,0.703,0.532,0.429,0.513,0.461,0.508,0.34,0.698,0.694,0.738,0.679,0.297,0.301],"z":[0.569,0.621,0.854,0.643,0.755,0.585,0.768,0.731,0.809,0.761,0.73,0.805,0.729,0.754,0.649,0.676,0.676,0.705,0.647,0.615,0.863,0.842,0.48,0.675],"mode":"markers","opacity":0.75,"type":"scatter3d","name":"1","marker":{"color":"rgba(102,194,165,1)","symbol":["square","circle","square","square","square","square","square","square","square","square","circle","circle","circle","square","circle","circle","circle","circle","circle","square","circle","square","square","circle"],"line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"frame":null},{"x":[128.914,84.931,141.97,100.056,98.017,149.941,111.13,114.981,141.024,80.935,155.173,110.014,139.997,166.09,140.114,100.541,165.935,122.973,178.555,83.982,99.919,120.074,127.99,79.977,140.022],"y":[0.412,0.508,0.099,0.496,0.495,0.842,0.634,0.458,0.287,0.319,0.047,0.376,0.507,0.446,0.269,0.101,0.509,0.516,0.551,0.658,0.692,0.472,0.444,0.594,0.797],"z":[0.708,0.742,0.253,0.928,0.867,0.845,0.777,0.926,0.746,0.831,0.702,0.736,0.905,0.682,0.778,0.831,0.381,0.453,0.676,0.696,0.551,0.804,0.356,0.634,0.76],"mode":"markers","opacity":0.75,"type":"scatter3d","name":"2","marker":{"color":"rgba(252,141,98,1)","symbol":["circle","square","square","circle","circle","circle","square","square","square","square","square","square","square","square","circle","circle","square","square","circle","circle","circle","circle","square","circle","square"],"line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"frame":null},{"x":[138.263,125.017,84.46,99.954,91.025,172.783,125.005,85.008,100.03,113.973,128.789,159.987,144.059,87.967,95.017,99.112,117.911],"y":[0.619,0.48,0.846,0.937,0.67,0.795,0.743,0.776,0.58,0.824,0.42,0.804,0.387,0.906,0.395,0.199,0.761],"z":[0.739,0.767,0.647,0.885,0.714,0.467,0.721,0.884,0.823,0.784,0.704,0.839,0.804,0.727,0.843,0.391,0.673],"mode":"markers","opacity":0.75,"type":"scatter3d","name":"3","marker":{"color":"rgba(141,160,203,1)","symbol":["circle","square","circle","circle","circle","circle","square","circle","square","square","square","circle","circle","square","circle","circle","circle"],"line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"frame":null},{"x":[81.932,153.978,88.255,145.972,183.114,163.861,96.767,155.008,141.894,107.018,174.088,79.938,78.846,128.012,103.961],"y":[0.122,0.0966,0.485,0.274,0.106,0.112,0.174,0.446,0.177,0.556,0.241,0.239,0.632,0.568,0.291],"z":[0.494,0.367,0.727,0.837,0.487,0.388,0.57,0.834,0.52,0.836,0.794,0.559,0.387,0.689,0.802],"mode":"markers","opacity":0.75,"type":"scatter3d","name":"4","marker":{"color":"rgba(231,138,195,1)","symbol":["circle","square","square","square","circle","square","square","square","square","circle","circle","square","square","circle","square"],"line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"frame":null},{"x":[129.944,158.052,77.066,98.401,196.043,88.753,151.891,78.558,84.244,147.987,81.956,76.469,129.989,102.001,129.938,121.989,70.08,149.173,99.939],"y":[0.461,0.813,0.701,0.931,0.628,0.721,0.877,0.62,0.421,0.616,0.734,0.0605,0.678,0.281,0.445,0.535,0.663,0.839,0.408],"z":[0.76,0.744,0.45,0.841,0.611,0.625,0.815,0.558,0.789,0.568,0.697,0.598,0.778,0.782,0.728,0.809,0.788,0.874,0.695],"mode":"markers","opacity":0.75,"type":"scatter3d","name":"5","marker":{"color":"rgba(166,216,84,1)","symbol":["circle","square","circle","square","circle","circle","circle","square","circle","circle","circle","circle","circle","circle","circle","circle","square","circle","circle"],"line":{"color":"rgba(166,216,84,1)"}},"textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"line":{"color":"rgba(166,216,84,1)"},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The plot above provides a better visualization of our clustering pattern by including more numeric audio feature predictors. The four-dimensional scatterplot has danceability values mapped to the z axis, song tempo mapped to the x axis, and song valence (positivity) mapped to the y axis. Furthermore, the points are colored by what cluster they belong to (1-5), and the shape of the point indicates the modality of the track: square represents a melody in a Major key, circle represents a melody in a Minor key. This visualization indicates a better cluster organization than the 2-dimensional ggplot above; but, the cluster organization is still not distinct enough to be perceptible at a glance. It would be useful to visualize other 4D plots using different numeric audio feature predictors to determine if one set of 3 are better predictors than others.</p>
</div>
</div>

            
        <hr>         <div class="related-posts">
                <h5>Related Posts</h5>
                
              </div> 
            </div>
          </div>

   <hr>  <div class="disqus">
  <div id="disqus_thread"></div>
  <script type="text/javascript">

    (function() {
      
      
      if (window.location.hostname == "localhost")
        return;

      var disqus_shortname = '';
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div> 
        </div>
      </div>
    </div>

    
    <footer>
  <div id="footer">
    <div class="container">
      <p class="text-muted">&copy; All rights reserved. Powered by <a href="https://gohugo.io/">Hugo</a> and
      <a href="http://www.github.com/nurlansu/hugo-sustain/">sustain</a> with ♥</p>
    </div>
  </div>
</footer>
<div class="footer"></div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="/js/docs.min.js"></script>
<script src="/js/main.js"></script>

<script src="/js/ie10-viewport-bug-workaround.js"></script>


    
  </body>
</html>
